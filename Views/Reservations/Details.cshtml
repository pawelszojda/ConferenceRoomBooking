@model ConferenceRoomBooking.Models.Reservation
@{
    ViewData["Title"] = "Szczegóły rezerwacji";
}

<h1>@ViewData["Title"]</h1>
<hr />

<div class="row">
    <div class="col-md-8">
        <dl class="row">
            <dt class="col-sm-4">Sala</dt>
            <dd class="col-sm-8">@Model.Room.Name</dd>
            
            <dt class="col-sm-4">Użytkownik</dt>
            <dd class="col-sm-8">@Model.User.Email</dd>
            
            <dt class="col-sm-4">Data rozpoczęcia</dt>
            <dd class="col-sm-8">@Model.StartTime.ToString("dd.MM.yyyy HH:mm")</dd>
            
            <dt class="col-sm-4">Data zakończenia</dt>
            <dd class="col-sm-8">@Model.EndTime.ToString("dd.MM.yyyy HH:mm")</dd>
            
            <dt class="col-sm-4">Czas trwania</dt>
            <dd class="col-sm-8">@((Model.EndTime - Model.StartTime).TotalHours.ToString("0.0")) godzin(y)</dd>
            
            <dt class="col-sm-4">Cel spotkania</dt>
            <dd class="col-sm-8">@Model.Purpose</dd>
            
            <dt class="col-sm-4">Status</dt>
            <dd class="col-sm-8">
                @switch (Model.Status)
                {
                    case ConferenceRoomBooking.Models.ReservationStatus.Pending:
                        <span class="badge bg-warning">Oczekuje na zatwierdzenie</span>
                        break;
                    case ConferenceRoomBooking.Models.ReservationStatus.Approved:
                        <span class="badge bg-success">Zatwierdzona</span>
                        break;
                    case ConferenceRoomBooking.Models.ReservationStatus.Rejected:
                        <span class="badge bg-danger">Odrzucona</span>
                        break;
                    case ConferenceRoomBooking.Models.ReservationStatus.Cancelled:
                        <span class="badge bg-secondary">Anulowana</span>
                        break;
                }
            </dd>
            
            <dt class="col-sm-4">Data utworzenia</dt>
            <dd class="col-sm-8">@Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")</dd>
        </dl>
        
        <div class="mt-3">
            @if (Model.Status == ConferenceRoomBooking.Models.ReservationStatus.Pending)
            {
                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">Edytuj</a>
            }
            
            @if (Model.Status != ConferenceRoomBooking.Models.ReservationStatus.Cancelled 
                && Model.Status != ConferenceRoomBooking.Models.ReservationStatus.Rejected)
            {
                <form asp-action="Cancel" asp-route-id="@Model.Id" method="post" class="d-inline"
                      onsubmit="return confirm('Czy na pewno chcesz anulować tę rezerwację?');">
                    <button type="submit" class="btn btn-danger">Anuluj rezerwację</button>
                </form>
            }
            
            <a asp-action="Index" class="btn btn-secondary">Powrót do listy</a>
        </div>
    </div>
</div>